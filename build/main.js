var M=Object.defineProperty,Zi=Object.defineProperties,Yi=Object.getOwnPropertyDescriptor,Ji=Object.getOwnPropertyDescriptors,en=Object.getOwnPropertyNames,ee=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable;var te=(t,e,n)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R=(t,e)=>{for(var n in e||(e={}))ie.call(e,n)&&te(t,n,e[n]);if(ee)for(var n of ee(e))tn.call(e,n)&&te(t,n,e[n]);return t},O=(t,e)=>Zi(t,Ji(e));var a=(t,e)=>()=>(t&&(e=t(t=0)),e);var nn=(t,e)=>{for(var n in e)M(t,n,{get:e[n],enumerable:!0})},rn=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of en(e))!ie.call(t,i)&&i!==n&&M(t,i,{get:()=>e[i],enumerable:!(r=Yi(e,i))||r.enumerable});return t};var ne=t=>rn(M({},"__esModule",{value:!0}),t);function x(t,e){let n=`${re}`;return re+=1,b[n]={handler:e,name:t},function(){delete b[n]}}function $(t,e){let n=!1;return x(t,function(...r){n!==!0&&(n=!0,e(...r))})}function ae(t,e){let n=!1;for(let r in b)b[r].name===t&&(b[r].handler.apply(null,e),n=!0);if(n===!1)throw new Error(`No event handler with name \`${t}\``)}var b,re,u,oe=a(()=>{b={},re=0;u=typeof window=="undefined"?function(t,...e){figma.ui.postMessage([t,...e])}:function(t,...e){window.parent.postMessage({pluginMessage:[t,...e]},"*")};typeof window=="undefined"?figma.ui.onmessage=function(t){if(!Array.isArray(t))return;let[e,...n]=t;typeof e=="string"&&ae(e,n)}:window.onmessage=function(t){if(typeof t.data.pluginMessage=="undefined")return;let e=t.data.pluginMessage;if(!Array.isArray(e))return;let[n,...r]=t.data.pluginMessage;typeof n=="string"&&ae(n,r)}});function C(t,e){if(typeof __html__=="undefined")throw new Error("No UI defined");let n=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof e=="undefined"?{}:e)};${__html__}</script>`;figma.showUI(n,O(R({},t),{themeColors:typeof t.themeColors=="undefined"?!0:t.themeColors}))}var se=a(()=>{});var H=a(()=>{oe();se()});function an(t,e){return t.family===e.family&&t.style===e.style}function ce(t){return`${t.family}||${t.style}`}function le(t){let e={Thin:"100","Extra Light":"200",Light:"300",Regular:"400",Medium:"500","Semi Bold":"600",Bold:"700","Extra Bold":"800",Black:"900"},n=t.match(/\d{3}/);if(n)return n[0];for(let[r,i]of Object.entries(e))if(t.includes(r))return i;return t}function fe(t,e,n){let r;e!==void 0&&n!==void 0?r=t.getRangeLineHeight(e,n):r=t.lineHeight,r===figma.mixed&&(r=t.getRangeLineHeight(0,1));let i=r;if(i.unit==="PIXELS"&&"value"in i)return i.value;if(i.unit==="PERCENT"&&"value"in i){let s=e!==void 0&&n!==void 0?t.getRangeFontSize(e,n):t.fontSize;return(s===figma.mixed?16:s)*i.value/100}else{let s=e!==void 0&&n!==void 0?t.getRangeFontSize(e,n):t.fontSize;return(s===figma.mixed?16:s)*1.2}}function W(t){let e=[];function n(i){let s=i.characters.length;if(s!==0)try{let o=i.fontName;if(o!==figma.mixed){let c=o,l=i.fontSize;e.push({nodeId:i.id,nodeName:i.name,rangeStart:0,rangeEnd:s,font:{family:c.family,style:c.style},fontSize:l,lineHeightPx:fe(i),fontWeight:le(c.style)})}else{let c=0;for(;c<s;){let l=i.getRangeFontName(c,c+1),f=i.getRangeFontSize(c,c+1),g=c+1;for(;g<s;){let m=i.getRangeFontName(g,g+1),d=i.getRangeFontSize(g,g+1);if(!an(l,m)||f!==d)break;g++}e.push({nodeId:i.id,nodeName:i.name,rangeStart:c,rangeEnd:g,font:{family:l.family,style:l.style},fontSize:f,lineHeightPx:fe(i,c,g),fontWeight:le(l.style)}),c=g}}}catch(o){console.warn(`Failed to process text node ${i.id}:`,o)}}function r(i){if(i.type==="TEXT")n(i);else if("children"in i)for(let s of i.children)r(s)}for(let i of t)r(i);return e}function T(t){let e=new Map;for(let n of t){let r=ce(n.font),i=e.get(r);if(!i){let s=new Set,o=[];for(let c of t)ce(c.font)===r&&(o.push(c),s.add(c.nodeId));i={font:n.font,count:o.length,nodesCount:s.size,occurrences:o},e.set(r,i)}}return Array.from(e.values()).sort((n,r)=>r.count-n.count)}function on(t){let e=new Map;for(let n of t){let r=Math.round(n.lineHeightPx).toString(),i=e.get(r)||[];i.push(n),e.set(r,i)}return Array.from(e.entries()).map(([n,r])=>({key:`lineHeight:${n}`,label:`Line Height: ${n}px`,occurrences:r,count:r.length}))}function sn(t){let e=new Map;for(let n of t){let r=Math.round(n.fontSize).toString(),i=e.get(r)||[];i.push(n),e.set(r,i)}return Array.from(e.entries()).map(([n,r])=>({key:`fontSize:${n}`,label:`Font Size: ${n}px`,occurrences:r,count:r.length}))}function cn(t){let e=new Map;for(let n of t){let r=n.fontWeight,i=e.get(r)||[];i.push(n),e.set(r,i)}return Array.from(e.entries()).map(([n,r])=>({key:`fontWeight:${n}`,label:`Weight: ${n}`,occurrences:r,count:r.length}))}function ln(t){let e=new Map;for(let n of t){let r=n.font.family,i=e.get(r)||[];i.push(n),e.set(r,i)}return Array.from(e.entries()).map(([n,r])=>({key:`fontFamily:${n}`,label:`Family: ${n}`,occurrences:r,count:r.length}))}function L(t){return{lineHeight:on(t),fontSize:sn(t),fontWeight:cn(t),fontFamily:ln(t)}}var G=a(()=>{"use strict"});var me,de=a(()=>{"use strict";H();G();me=async function(){let t=figma.currentPage.selection;if(t.length===0){figma.notify("Please select at least one layer",{error:!0}),u("FONTS_SCANNED",{fonts:[],groups:{lineHeight:[],fontSize:[],fontWeight:[],fontFamily:[]},totalNodes:0});return}let e=W(t);if(e.length===0){figma.notify("No text layers found in selection"),u("FONTS_SCANNED",{fonts:[],groups:{lineHeight:[],fontSize:[],fontWeight:[],fontFamily:[]},totalNodes:0});return}let n=T(e),r=L(e),i=new Set(e.map(s=>s.nodeId));u("FONTS_SCANNED",{fonts:n,groups:r,totalNodes:i.size}),figma.notify(`Found ${n.length} fonts in ${i.size} text layers`)}});var ue,ge=a(()=>{"use strict";H();ue=async function(t){let e={success:!1,affectedNodes:0,affectedRanges:0,errors:[]};try{await figma.loadFontAsync({family:t.newFont.family,style:t.newFont.style});let n=new Set;for(let r of t.occurrences)try{let i=figma.getNodeById(r.nodeId);if(!i||i.type!=="TEXT")continue;try{await figma.loadFontAsync({family:r.font.family,style:r.font.style})}catch(s){}if(i.setRangeFontName(r.rangeStart,r.rangeEnd,{family:t.newFont.family,style:t.newFont.style}),t.newLineHeight)try{i.setRangeLineHeight(r.rangeStart,r.rangeEnd,{value:t.newLineHeight,unit:"PIXELS"})}catch(s){i.lineHeight={value:t.newLineHeight,unit:"PIXELS"}}if(t.newFontSize)try{i.setRangeFontSize(r.rangeStart,r.rangeEnd,t.newFontSize)}catch(s){i.fontSize=t.newFontSize}e.affectedRanges++,n.add(i.id)}catch(i){e.errors.push(`Error updating node ${r.nodeId}: ${i}`)}e.affectedNodes=n.size,e.success=e.affectedRanges>0,e.success?figma.notify(`Updated ${e.affectedRanges} text ranges in ${e.affectedNodes} layers`):figma.notify("Failed to apply changes",{error:!0})}catch(n){e.errors.push(`Font loading failed: ${n}`),figma.notify("Failed to load font",{error:!0})}u("REPLACEMENT_COMPLETE",e)}});var he,pe=a(()=>{"use strict";H();G();he=async function(t){let e=0,n=0,r=new Set,i=[];try{let s=async(o,c)=>{let f=(await figma.listAvailableFontsAsync()).filter(h=>h.fontName.family===o);if(f.length===0)return null;let m={100:["Thin","Hairline","100","100 Thin"],200:["Extra Light","ExtraLight","Ultra Light","UltraLight","200","200 Extra Light"],300:["Light","Lt","300","300 Light"],400:["Regular","Normal","Book","Rg","400","400 Regular"],500:["Medium","Md","500","500 Medium"],600:["Semi Bold","SemiBold","Demi Bold","DemiBold","600","600 Semi Bold"],700:["Bold","Bd","700","700 Bold"],800:["Extra Bold","ExtraBold","Ultra Bold","UltraBold","800","800 Extra Bold"],900:["Black","Heavy","Bk","900","900 Black"]}[c]||[];for(let h of m){let p=f.find(y=>y.fontName.style.toLowerCase()===h.toLowerCase());if(p)return p.fontName.style}for(let h of m){let p=f.find(y=>y.fontName.style.toLowerCase().includes(h.toLowerCase()));if(p)return p.fontName.style}let d=f.find(h=>h.fontName.style.toLowerCase()==="regular"||h.fontName.style.toLowerCase()==="normal"||h.fontName.style.toLowerCase()==="400");return d?d.fontName.style:f[0].fontName.style};for(let o of t.occurrences)try{let c=figma.getNodeById(o.nodeId);if(!c||c.type!=="TEXT")continue;try{await figma.loadFontAsync({family:o.font.family,style:o.font.style})}catch(l){i.push(`Failed to load font ${o.font.family} ${o.font.style}`);continue}if(t.groupType==="fontWeight"){let l=t.targetValue,f=await s(o.font.family,l);if(!f){i.push(`Could not find matching weight ${l} for ${o.font.family}`);continue}await figma.loadFontAsync({family:o.font.family,style:f}),c.setRangeFontName(o.rangeStart,o.rangeEnd,{family:o.font.family,style:f}),e++}else if(t.groupType==="lineHeight"){let l=t.targetValue;try{c.setRangeLineHeight(o.rangeStart,o.rangeEnd,{value:l,unit:"PIXELS"})}catch(f){c.lineHeight={value:l,unit:"PIXELS"}}e++}else if(t.groupType==="fontSize"){let l=t.targetValue;try{c.setRangeFontSize(o.rangeStart,o.rangeEnd,l)}catch(f){c.fontSize=l}e++}r.add(c.id)}catch(c){i.push(`Error updating node ${o.nodeId}: ${c}`)}n=r.size,e>0?(figma.notify(`Updated ${e} range${e===1?"":"s"} in ${n} layer${n===1?"":"s"}`),u("FONTS_SCANNED",{fonts:T(W(figma.currentPage.selection)),groups:L(W(figma.currentPage.selection)),totalNodes:r.size})):(figma.notify("No changes applied",{error:!0}),i.length>0&&console.error("Bulk update errors:",i))}catch(s){figma.notify(`Bulk update failed: ${s}`,{error:!0}),console.error("Bulk update error:",s)}}});var xe,ye=a(()=>{"use strict";H();xe=async function(){let t=await figma.listAvailableFontsAsync();u("AVAILABLE_FONTS",t)}});var He,Ae=a(()=>{"use strict";He=function(t){let e=new Set(t.map(r=>r.nodeId)),n=[];for(let r of Array.from(e)){let i=figma.getNodeById(r);i&&n.push(i)}n.length>0&&(figma.currentPage.selection=n,figma.viewport.scrollAndZoomIntoView(n))}});var ve,Se=a(()=>{"use strict";ve=function(t){let e=figma.getNodeById(t.nodeId);e&&(figma.currentPage.selection=[e],figma.viewport.scrollAndZoomIntoView([e]))}});var Ne,be=a(()=>{Ne={familyName:"Arial",category:"sans-serif",capHeight:1467,ascent:1854,descent:-434,lineGap:67,unitsPerEm:2048,xHeight:1062,xWidthAvg:913,subsets:{latin:{xWidthAvg:913},thai:{xWidthAvg:1536}}}});var _,We=a(()=>{_={familyName:"Helvetica",category:"sans-serif",capHeight:1469,ascent:1577,descent:-471,lineGap:0,unitsPerEm:2048,xHeight:1071,xWidthAvg:913,subsets:{latin:{xWidthAvg:913},thai:{xWidthAvg:1298}}}});var Ee,Fe=a(()=>{Ee={familyName:"Roboto",category:"sans-serif",capHeight:1456,ascent:1900,descent:-500,lineGap:0,unitsPerEm:2048,xHeight:1082,xWidthAvg:911,subsets:{latin:{xWidthAvg:911},thai:{xWidthAvg:908}}}});var Me,Te=a(()=>{Me={familyName:"Inter",category:"sans-serif",capHeight:2048,ascent:2728,descent:-680,lineGap:0,unitsPerEm:2816,xHeight:1536,xWidthAvg:1344,subsets:{latin:{xWidthAvg:1344},thai:{xWidthAvg:2800}}}});var Le,Pe=a(()=>{Le={familyName:"Open Sans",category:"sans-serif",capHeight:1462,ascent:2189,descent:-600,lineGap:0,unitsPerEm:2048,xHeight:1096,xWidthAvg:960,subsets:{latin:{xWidthAvg:960},thai:{xWidthAvg:1229}}}});var Ie,we=a(()=>{Ie={familyName:"Montserrat",category:"sans-serif",capHeight:700,ascent:968,descent:-251,lineGap:0,unitsPerEm:1e3,xHeight:517,xWidthAvg:503,subsets:{latin:{xWidthAvg:503},thai:{xWidthAvg:587}}}});var Re,Oe=a(()=>{Re={familyName:"Lato",category:"sans-serif",capHeight:1433,ascent:1974,descent:-426,lineGap:0,unitsPerEm:2e3,xHeight:1013,xWidthAvg:871,subsets:{latin:{xWidthAvg:871},thai:{xWidthAvg:1063}}}});var $e,Ce=a(()=>{$e={familyName:"Poppins",category:"sans-serif",capHeight:698,ascent:1050,descent:-350,lineGap:100,unitsPerEm:1e3,xHeight:548,xWidthAvg:500,subsets:{latin:{xWidthAvg:500},thai:{xWidthAvg:500}}}});var Ge,_e=a(()=>{Ge={familyName:"Raleway",category:"sans-serif",capHeight:710,ascent:940,descent:-234,lineGap:0,unitsPerEm:1e3,xHeight:519,xWidthAvg:463,subsets:{latin:{xWidthAvg:463},thai:{xWidthAvg:608}}}});var B,Be=a(()=>{B={familyName:"Source Sans 3",category:"sans-serif",capHeight:660,ascent:1024,descent:-400,lineGap:0,unitsPerEm:1e3,xHeight:486,xWidthAvg:418,subsets:{latin:{xWidthAvg:418},thai:{xWidthAvg:653}}}});var ze,ke=a(()=>{ze={familyName:"Oswald",category:"sans-serif",capHeight:810,ascent:1193,descent:-289,lineGap:0,unitsPerEm:1e3,xHeight:578,xWidthAvg:363,subsets:{latin:{xWidthAvg:363},thai:{xWidthAvg:682}}}});var De,Ue=a(()=>{De={familyName:"Merriweather",category:"serif",capHeight:743,ascent:984,descent:-273,lineGap:0,unitsPerEm:1e3,xHeight:555,xWidthAvg:496,subsets:{latin:{xWidthAvg:496},thai:{xWidthAvg:864}}}});var je,Xe=a(()=>{je={familyName:"Playfair Display",category:"serif",capHeight:708,ascent:1082,descent:-251,lineGap:0,unitsPerEm:1e3,xHeight:514,xWidthAvg:452,subsets:{latin:{xWidthAvg:452},thai:{xWidthAvg:562}}}});var Ve,qe=a(()=>{Ve={familyName:"Ubuntu",category:"sans-serif",capHeight:693,ascent:932,descent:-189,lineGap:28,unitsPerEm:1e3,xHeight:520,xWidthAvg:455,subsets:{latin:{xWidthAvg:455},thai:{xWidthAvg:500}}}});var Ke,Qe=a(()=>{Ke={familyName:"Rubik",category:"sans-serif",capHeight:700,ascent:935,descent:-250,lineGap:0,unitsPerEm:1e3,xHeight:520,xWidthAvg:468,subsets:{latin:{xWidthAvg:468},thai:{xWidthAvg:695}}}});var Ze,Ye=a(()=>{Ze={familyName:"Nunito",category:"sans-serif",capHeight:705,ascent:1011,descent:-353,lineGap:0,unitsPerEm:1e3,xHeight:484,xWidthAvg:452,subsets:{latin:{xWidthAvg:452},thai:{xWidthAvg:500}}}});var Je,et=a(()=>{Je={familyName:"Noto Sans",category:"sans-serif",capHeight:714,ascent:1069,descent:-293,lineGap:0,unitsPerEm:1e3,xHeight:536,xWidthAvg:474,subsets:{latin:{xWidthAvg:474},thai:{xWidthAvg:600}}}});var tt,it=a(()=>{tt={familyName:"PT Sans",category:"sans-serif",capHeight:700,ascent:1018,descent:-276,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:431,subsets:{latin:{xWidthAvg:431},thai:{xWidthAvg:750}}}});var nt,rt=a(()=>{nt={familyName:"PT Serif",category:"serif",capHeight:700,ascent:1039,descent:-286,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:448,subsets:{latin:{xWidthAvg:448},thai:{xWidthAvg:709}}}});var at,ot=a(()=>{at={familyName:"Work Sans",category:"sans-serif",capHeight:660,ascent:930,descent:-243,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:499,subsets:{latin:{xWidthAvg:499},thai:{xWidthAvg:500}}}});var st,ct=a(()=>{st={familyName:"Quicksand",category:"sans-serif",capHeight:700,ascent:1e3,descent:-250,lineGap:0,unitsPerEm:1e3,xHeight:503,xWidthAvg:465,subsets:{latin:{xWidthAvg:465},thai:{xWidthAvg:584}}}});var lt,ft=a(()=>{lt={familyName:"Fira Sans",category:"sans-serif",capHeight:689,ascent:935,descent:-265,lineGap:0,unitsPerEm:1e3,xHeight:527,xWidthAvg:458,subsets:{latin:{xWidthAvg:458},thai:{xWidthAvg:666}}}});var mt,dt=a(()=>{mt={familyName:"Barlow",category:"sans-serif",capHeight:700,ascent:1e3,descent:-200,lineGap:0,unitsPerEm:1e3,xHeight:506,xWidthAvg:431,subsets:{latin:{xWidthAvg:431},thai:{xWidthAvg:419}}}});var z,ut=a(()=>{z={familyName:"Mulish",category:"sans-serif",capHeight:705,ascent:1005,descent:-250,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:464,subsets:{latin:{xWidthAvg:464},thai:{xWidthAvg:500}}}});var gt,ht=a(()=>{gt={familyName:"Titillium Web",category:"sans-serif",capHeight:692,ascent:1133,descent:-388,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:421,subsets:{latin:{xWidthAvg:421},thai:{xWidthAvg:235}}}});var pt,xt=a(()=>{pt={familyName:"Kanit",category:"sans-serif",capHeight:644,ascent:1100,descent:-395,lineGap:0,unitsPerEm:1e3,xHeight:474,xWidthAvg:452,subsets:{latin:{xWidthAvg:452},thai:{xWidthAvg:550}}}});var yt,Ht=a(()=>{yt={familyName:"DM Sans",category:"sans-serif",capHeight:700,ascent:992,descent:-310,lineGap:0,unitsPerEm:1e3,xHeight:504,xWidthAvg:466,subsets:{latin:{xWidthAvg:466},thai:{xWidthAvg:551}}}});var At,vt=a(()=>{At={familyName:"Heebo",category:"sans-serif",capHeight:1456,ascent:2146,descent:-862,lineGap:0,unitsPerEm:2048,xHeight:1178,xWidthAvg:912,subsets:{latin:{xWidthAvg:912},thai:{xWidthAvg:1024}}}});var St,Nt=a(()=>{St={familyName:"IBM Plex Sans",category:"sans-serif",capHeight:698,ascent:1025,descent:-275,lineGap:0,unitsPerEm:1e3,xHeight:516,xWidthAvg:451,subsets:{latin:{xWidthAvg:451},thai:{xWidthAvg:472}}}});var bt,Wt=a(()=>{bt={familyName:"Mukta",category:"sans-serif",capHeight:630,ascent:1130,descent:-532,lineGap:0,unitsPerEm:1e3,xHeight:468,xWidthAvg:420,subsets:{latin:{xWidthAvg:420},thai:{xWidthAvg:500}}}});var Et,Ft=a(()=>{Et={familyName:"Oxygen",category:"sans-serif",ascent:2103,descent:-483,lineGap:0,unitsPerEm:2048,xWidthAvg:923,subsets:{latin:{xWidthAvg:923},thai:{xWidthAvg:1024}}}});var Mt,Tt=a(()=>{Mt={familyName:"Arimo",category:"sans-serif",capHeight:1409,ascent:1854,descent:-434,lineGap:67,unitsPerEm:2048,xHeight:1082,xWidthAvg:913,subsets:{latin:{xWidthAvg:913},thai:{xWidthAvg:1536}}}});var Lt,Pt=a(()=>{Lt={familyName:"Dosis",category:"sans-serif",capHeight:731,ascent:1027,descent:-237,lineGap:0,unitsPerEm:1e3,xHeight:472,xWidthAvg:377,subsets:{latin:{xWidthAvg:377},thai:{xWidthAvg:340}}}});var It,wt=a(()=>{It={familyName:"Josefin Sans",category:"sans-serif",capHeight:702,ascent:750,descent:-250,lineGap:0,unitsPerEm:1e3,xHeight:378,xWidthAvg:456,subsets:{latin:{xWidthAvg:456},thai:{xWidthAvg:300}}}});var Rt,Ot=a(()=>{Rt={familyName:"Cabin",category:"sans-serif",capHeight:1400,ascent:1930,descent:-500,lineGap:0,unitsPerEm:2e3,xHeight:980,xWidthAvg:844,subsets:{latin:{xWidthAvg:844},thai:{xWidthAvg:1206}}}});var $t,Ct=a(()=>{$t={familyName:"Anton",category:"sans-serif",capHeight:1760,ascent:2409,descent:-674,lineGap:0,unitsPerEm:2048,xHeight:1500,xWidthAvg:828,subsets:{latin:{xWidthAvg:828},thai:{xWidthAvg:1022}}}});var Gt,_t=a(()=>{Gt={familyName:"Bitter",category:"serif",capHeight:692,ascent:935,descent:-265,lineGap:0,unitsPerEm:1e3,xHeight:522,xWidthAvg:465,subsets:{latin:{xWidthAvg:465},thai:{xWidthAvg:495}}}});var Bt,zt=a(()=>{Bt={familyName:"Crimson Text",category:"serif",capHeight:656,ascent:972,descent:-359,lineGap:0,unitsPerEm:1024,xHeight:430,xWidthAvg:405,subsets:{latin:{xWidthAvg:405},thai:{xWidthAvg:374}}}});var kt,Dt=a(()=>{kt={familyName:"Hind",category:"sans-serif",capHeight:679,ascent:1055,descent:-546,lineGap:0,unitsPerEm:1e3,xHeight:505,xWidthAvg:429,subsets:{latin:{xWidthAvg:429},thai:{xWidthAvg:751}}}});var Ut,jt=a(()=>{Ut={familyName:"Inconsolata",category:"monospace",capHeight:623,ascent:859,descent:-190,lineGap:0,unitsPerEm:1e3,xHeight:457,xWidthAvg:500,subsets:{latin:{xWidthAvg:500},thai:{xWidthAvg:500}}}});var Xt,Vt=a(()=>{Xt={familyName:"Karla",category:"sans-serif",capHeight:1256,ascent:1834,descent:-504,lineGap:0,unitsPerEm:2e3,xHeight:956,xWidthAvg:913,subsets:{latin:{xWidthAvg:913},thai:{xWidthAvg:1031}}}});var qt,Kt=a(()=>{qt={familyName:"Libre Baskerville",category:"serif",capHeight:770,ascent:970,descent:-270,lineGap:0,unitsPerEm:1e3,xHeight:530,xWidthAvg:517,subsets:{latin:{xWidthAvg:517},thai:{xWidthAvg:756}}}});var Qt,Zt=a(()=>{Qt={familyName:"Libre Franklin",category:"sans-serif",capHeight:742,ascent:966,descent:-246,lineGap:0,unitsPerEm:1e3,xHeight:530,xWidthAvg:465,subsets:{latin:{xWidthAvg:465},thai:{xWidthAvg:702}}}});var Yt,Jt=a(()=>{Yt={familyName:"Lora",category:"serif",capHeight:700,ascent:1006,descent:-274,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:468,subsets:{latin:{xWidthAvg:468},thai:{xWidthAvg:529}}}});var ei,ti=a(()=>{ei={familyName:"Manrope",category:"sans-serif",capHeight:1440,ascent:2132,descent:-600,lineGap:0,unitsPerEm:2e3,xHeight:1080,xWidthAvg:920,subsets:{latin:{xWidthAvg:920},thai:{xWidthAvg:1480}}}});var ii,ni=a(()=>{ii={familyName:"Maven Pro",category:"sans-serif",capHeight:667,ascent:965,descent:-210,lineGap:0,unitsPerEm:1e3,xHeight:499,xWidthAvg:462,subsets:{latin:{xWidthAvg:462},thai:{xWidthAvg:500}}}});var ri,ai=a(()=>{ri={familyName:"NanumGothic",category:"sans-serif",capHeight:700,ascent:920,descent:-230,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:466,subsets:{latin:{xWidthAvg:466},thai:{xWidthAvg:940}}}});var oi,si=a(()=>{oi={familyName:"Nunito Sans 12pt",category:"sans-serif",capHeight:705,ascent:1011,descent:-353,lineGap:0,unitsPerEm:1e3,xHeight:486,xWidthAvg:452,subsets:{latin:{xWidthAvg:452},thai:{xWidthAvg:500}}}});var ci,li=a(()=>{ci={familyName:"Pacifico",category:"handwriting",capHeight:840,ascent:1303,descent:-453,lineGap:0,unitsPerEm:1e3,xHeight:460,xWidthAvg:423,subsets:{latin:{xWidthAvg:423},thai:{xWidthAvg:265}}}});var fi,mi=a(()=>{fi={familyName:"PT Sans Narrow",category:"sans-serif",capHeight:700,ascent:1018,descent:-276,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:347,subsets:{latin:{xWidthAvg:347},thai:{xWidthAvg:750}}}});var di,ui=a(()=>{di={familyName:"Questrial",category:"sans-serif",capHeight:662,ascent:820,descent:-210,lineGap:0,unitsPerEm:1e3,xHeight:500,xWidthAvg:444,subsets:{latin:{xWidthAvg:444},thai:{xWidthAvg:524}}}});var gi,hi=a(()=>{gi={familyName:"Righteous",category:"display",capHeight:1434,ascent:2017,descent:-526,lineGap:0,unitsPerEm:2048,xHeight:1077,xWidthAvg:966,subsets:{latin:{xWidthAvg:966},thai:{xWidthAvg:573}}}});var pi,xi=a(()=>{pi={familyName:"Roboto Condensed",category:"sans-serif",capHeight:1456,ascent:1900,descent:-500,lineGap:0,unitsPerEm:2048,xHeight:1082,xWidthAvg:811,subsets:{latin:{xWidthAvg:811},thai:{xWidthAvg:803}}}});var yi,Hi=a(()=>{yi={familyName:"Roboto Mono",category:"monospace",capHeight:1456,ascent:2146,descent:-555,lineGap:0,unitsPerEm:2048,xHeight:1082,xWidthAvg:1229,subsets:{latin:{xWidthAvg:1229},thai:{xWidthAvg:1229}}}});var Ai,vi=a(()=>{Ai={familyName:"Roboto Slab",category:"serif",capHeight:1456,ascent:2146,descent:-555,lineGap:0,unitsPerEm:2048,xHeight:1082,xWidthAvg:972,subsets:{latin:{xWidthAvg:972},thai:{xWidthAvg:1038}}}});var Si,Ni=a(()=>{Si={familyName:"Signika",category:"sans-serif",capHeight:1366,ascent:1880,descent:-584,lineGap:0,unitsPerEm:2e3,xHeight:996,xWidthAvg:855,subsets:{latin:{xWidthAvg:855},thai:{xWidthAvg:1281}}}});var bi,Wi=a(()=>{bi={familyName:"Teko",category:"sans-serif",capHeight:626,ascent:958,descent:-475,lineGap:0,unitsPerEm:1e3,xHeight:485,xWidthAvg:292,subsets:{latin:{xWidthAvg:292},thai:{xWidthAvg:751}}}});var Ei,Fi=a(()=>{Ei={familyName:"Varela Round",category:"sans-serif",capHeight:698,ascent:918,descent:-286,lineGap:0,unitsPerEm:1e3,xHeight:510,xWidthAvg:478,subsets:{latin:{xWidthAvg:478},thai:{xWidthAvg:514}}}});var Mi,Ti=a(()=>{Mi={familyName:"Vollkorn",category:"serif",capHeight:676,ascent:952,descent:-441,lineGap:0,unitsPerEm:1e3,xHeight:458,xWidthAvg:438,subsets:{latin:{xWidthAvg:438},thai:{xWidthAvg:454}}}});var Li,Pi=a(()=>{Li={familyName:"Yantramanav",category:"sans-serif",capHeight:1279,ascent:1923,descent:-733,lineGap:0,unitsPerEm:2048,xHeight:986,xWidthAvg:843,subsets:{latin:{xWidthAvg:843},thai:{xWidthAvg:817}}}});function E(t){if(k[t])return k[t];let e=t.toLowerCase();for(let[n,r]of Object.entries(k))if(n.toLowerCase()===e)return r;return null}var k,D=a(()=>{"use strict";be();We();Fe();Te();Pe();we();Oe();Ce();_e();Be();ke();Ue();Xe();qe();Qe();Ye();et();it();rt();ot();ct();ft();dt();ut();ht();xt();Ht();vt();Nt();Wt();Ft();Tt();Pt();wt();Ot();Ct();_t();zt();Dt();jt();Vt();Kt();Zt();Jt();ti();ni();ai();si();li();mi();ui();hi();xi();Hi();vi();Ni();Wi();Fi();Ti();Pi();k={Arial:Ne,Helvetica:_,"Helvetica Neue":_,Roboto:Ee,Inter:Me,"Open Sans":Le,Montserrat:Ie,Lato:Re,Poppins:$e,Raleway:Ge,"Source Sans 3":B,"Source Sans Pro":B,Oswald:ze,Merriweather:De,"Playfair Display":je,Ubuntu:Ve,Rubik:Ke,Nunito:Ze,"Noto Sans":Je,"PT Sans":tt,"PT Serif":nt,"Work Sans":at,Quicksand:st,"Fira Sans":lt,Barlow:mt,Mulish:z,Muli:z,"Titillium Web":gt,Kanit:pt,"DM Sans":yt,Heebo:At,"IBM Plex Sans":St,Mukta:bt,Oxygen:Et,Arimo:Mt,Dosis:Lt,"Josefin Sans":It,Cabin:Rt,Anton:$t,Bitter:Gt,"Crimson Text":Bt,Hind:kt,Inconsolata:Ut,Karla:Xt,"Libre Baskerville":qt,"Libre Franklin":Qt,Lora:Yt,Manrope:ei,"Maven Pro":ii,"Nanum Gothic":ri,"Nunito Sans":oi,Pacifico:ci,"PT Sans Narrow":fi,Questrial:di,Righteous:gi,"Roboto Condensed":pi,"Roboto Mono":yi,"Roboto Slab":Ai,Signika:Si,Teko:bi,"Varela Round":Ei,Vollkorn:Mi,Yantramanav:Li}});function fn(t){if("leading"in t&&"lineGap"in t)throw new Error("Only a single line height style can be provided. Please pass either `lineGap` OR `leading`.");if("capHeight"in t&&"fontSize"in t)throw new Error("Please pass either `capHeight` OR `fontSize`, not both.");let{fontMetrics:e}=t,n=e.capHeight/e.unitsPerEm,r,i;if("capHeight"in t)r=t.capHeight/n,i=t.capHeight;else if("fontSize"in t)r=t.fontSize,i=t.fontSize*n;else throw new Error("Please pass either `capHeight` OR `fontSize`.");let s;return"lineGap"in t?s=i+t.lineGap:"leading"in t&&(s=t.leading),{fontSize:r,lineHeight:s,fontMetrics:e}}function Ii(t){let{fontSize:e,lineHeight:n,fontMetrics:r}=fn(t),i=Math.abs(r.descent),s=r.capHeight/r.unitsPerEm,o=i/r.unitsPerEm,c=r.ascent/r.unitsPerEm,l=r.lineGap/r.unitsPerEm,m=(r.ascent+r.lineGap+i)/r.unitsPerEm*e,d=y=>{if(n){let v=(m-n)/2;return y-v/e}return y},h=d(c-s+l/2)*-1,p=d(o+l/2)*-1;return{fontSize:`${P(e)}px`,lineHeight:n?`${P(n)}px`:"normal",capHeightTrim:`${P(h)}em`,baselineTrim:`${P(p)}em`}}var P,wi=a(()=>{P=t=>parseFloat(t.toFixed(4))});function Ri(t,e,n){try{let r=Ii({fontSize:t,leading:e,fontMetrics:n}),i=Math.round(parseFloat(r.capHeightTrim)*t),s=Math.round(parseFloat(r.baselineTrim)*t);return{topTrim:Math.abs(i),bottomTrim:Math.abs(s)}}catch(r){return console.error("Error calculating trim values:",r),{topTrim:0,bottomTrim:0}}}var Oi=a(()=>{"use strict";wi()});function $i(t){if(t.characters.length===0)return!1;let e=t.getRangeFontName(0,1);if(e===figma.mixed)return!0;for(let n=1;n<t.characters.length;n++){let r=t.getRangeFontName(n,n+1);if(r===figma.mixed||typeof e!="symbol"&&typeof r!="symbol"&&(e.family!==r.family||e.style!==r.style))return!0}return!1}function Ci(t){if(t.characters.length===0)return!1;let e=t.getRangeFontSize(0,1);if(e===figma.mixed)return!0;for(let n=1;n<t.characters.length;n++){let r=t.getRangeFontSize(n,n+1);if(r===figma.mixed||r!==e)return!0}return!1}function Gi(t){if(t.characters.length===0)return!1;let e=t.getRangeLineHeight(0,1);if(e===figma.mixed)return!0;for(let n=1;n<t.characters.length;n++){let r=t.getRangeLineHeight(n,n+1);if(r===figma.mixed||typeof e!="symbol"&&typeof r!="symbol"&&(e.unit!==r.unit||e.unit!=="AUTO"&&r.unit!=="AUTO"&&"value"in e&&"value"in r&&e.value!==r.value))return!0}return!1}var _i=a(()=>{"use strict"});function I(t){let e=t.lineHeight,n=typeof t.fontSize=="number"?t.fontSize:16;if(e===figma.mixed){let r=t.getRangeLineHeight(0,1);if(r!==figma.mixed)return r.unit==="PIXELS"?r.value:r.unit==="PERCENT"?r.value/100*n:n*1.2}else return e.unit==="PIXELS"?e.value:e.unit==="PERCENT"?e.value/100*n:n*1.2;return 16*1.2}var U=a(()=>{"use strict"});var Bi,zi=a(()=>{"use strict";H();D();Oi();_i();U();Bi=async function(){let t=figma.currentPage.selection,e={success:!1,trimmedNodes:0,trimmedTexts:[],errors:[]};if(t.length===0){e.errors.push("Please select at least one text layer"),figma.notify("Please select at least one text layer",{error:!0}),u("TRIM_COMPLETE",e);return}function n(i){let s=[];for(let o of i)o.type==="TEXT"?s.push(o):"children"in o&&s.push(...n(o.children));return s}let r=n(t);if(r.length===0){e.errors.push("No text layers found in selection"),figma.notify("No text layers found in selection",{error:!0}),u("TRIM_COMPLETE",e);return}for(let i of r)try{if($i(i)){e.errors.push(`${i.name}: Text has mixed fonts, cannot trim`);continue}if(Ci(i)){e.errors.push(`${i.name}: Text has mixed font sizes, cannot trim`);continue}if(Gi(i)){e.errors.push(`${i.name}: Text has mixed line heights, cannot trim`);continue}let s=i.fontName;if(s===figma.mixed){e.errors.push(`${i.name}: Cannot determine font`);continue}let o=i.fontSize;if(o===figma.mixed){e.errors.push(`${i.name}: Cannot determine font size`);continue}let c=I(i);console.log(`[Trim Debug] ${i.name}:`,{fontSize:o,lineHeightPx:c,fontFamily:s.family,lineHeightRaw:i.lineHeight});let l=E(s.family);if(!l){e.errors.push(`${i.name}: Font "${s.family}" is not currently supported. Try Arial, Roboto, Inter, or other common fonts.`);continue}let{topTrim:f,bottomTrim:g}=Ri(o,c,l);if(console.log("[Trim Debug] Calculated trims:",{topTrim:f,bottomTrim:g,ratio:c/o}),f===0&&g===0){e.errors.push(`${i.name}: Could not calculate trim values`);continue}try{await figma.loadFontAsync({family:s.family,style:s.style})}catch(y){e.errors.push(`${i.name}: Failed to load font "${s.family} ${s.style}"`);continue}i.textAutoResize==="NONE"&&(i.textAutoResize="HEIGHT");let m=figma.createFrame();m.name=`${i.name} (Trimmed)`,m.layoutMode="VERTICAL",m.primaryAxisSizingMode="AUTO",m.counterAxisSizingMode="AUTO",m.paddingTop=0,m.paddingBottom=0,m.paddingLeft=0,m.paddingRight=0,m.fills=[],m.clipsContent=!1,m.x=i.x-f,m.y=i.y-f;let d=i.parent,h=0;d&&"children"in d&&(h=d.children.indexOf(i)),d&&"appendChild"in d&&m.appendChild(i),i.x=0,i.y=-f;let p=c-f-g;m.resize(i.width,p),d&&"insertChild"in d&&d.insertChild(h,m),e.trimmedTexts.push({nodeId:i.id,nodeName:i.name,font:{family:s.family,style:s.style},fontSize:o,lineHeight:c,topTrim:f,bottomTrim:g}),e.trimmedNodes++}catch(s){e.errors.push(`${i.name}: ${s}`)}e.success=e.trimmedNodes>0,e.success?figma.notify(`Successfully trimmed ${e.trimmedNodes} text layer${e.trimmedNodes!==1?"s":""}`):figma.notify("Failed to trim text layers",{error:!0}),u("TRIM_COMPLETE",e)}});function j(t,e,n,r){let i,s=!1;t>32?(i=1.15,s=!0):t>=20?(i=1.25,s=!0):t>=14?i=1.5:i=1.35;let o=e||"";(o.includes("Condensed")||o.includes("Compressed")||o.includes("Narrow")||o.includes("Oswald")||o.includes("Bebas"))&&(i-=.1),s||(r==="Serif"||o.includes("Merriweather")||o.includes("Lora")||o.includes("Playfair"))&&(i+=.1),(o.includes("Display")||r==="Handwriting")&&(i-=.05);let c=t*i,l;if(n){let{ascent:g,descent:m,unitsPerEm:d}=n,h=(Math.abs(g)+Math.abs(m))/d,p=t*h,y=t*.1,v=p+y;if(s){let A=Math.max(c,v),N=A%1;N>0&&N<=.2?l=Math.floor(A):l=Math.ceil(A)}else{let A=Math.max(c,v);l=Math.ceil(A/4)*4}}else s?l=Math.ceil(c):l=Math.ceil(c/4)*4;let f=Math.max(t+4,t*1.05);return l<f&&(l=Math.ceil(f)),l}function X(t,e="",n){return j(t,e,n)}function ki(t,e,n="",r){let i=X(t,n,r),s=Math.abs(i-e);return Math.round(s)}var V=a(()=>{"use strict"});function q(t,e,n="",r){let i=j(t,n,r),s=e/t,o=e-i;return Math.abs(o)<=.5?{hasIssue:!1,issueType:"OPTIMAL",ratio:s,recommended:i}:o<0?{hasIssue:!0,issueType:"TOO_TIGHT",ratio:s,recommended:i}:{hasIssue:!0,issueType:"TOO_LOOSE",ratio:s,recommended:i}}var Di=a(()=>{"use strict";V()});async function Q(t){if(K[t])return K[t];try{let e=t.replace(/ /g,"+"),n=`${mn}?family=${e}`;console.log(`[Dynamic Metrics] Requesting from server: ${n}`);let r=await fetch(n);if(!r.ok)return console.warn(`[Dynamic Metrics] Server returned ${r.status} for ${t}`),null;let i=await r.json();if(i.error)return console.warn(`[Dynamic Metrics] Server error for ${t}: ${i.error}`),null;if(i.ascent&&i.unitsPerEm)return console.log(`[Dynamic Metrics] Successfully fetched metrics for ${t}`,i),K[t]=i,i}catch(e){console.error(`[Dynamic Metrics] Network error fetching metrics for ${t}:`,e)}return null}var K,mn,Ui=a(()=>{"use strict";K={},mn="https://font-toolkit.vercel.app/metrics"});var ji,Xi=a(()=>{"use strict";H();U();Di();V();D();Ui();ji=async function(){let t=figma.currentPage.selection,e={totalScanned:0,issuesFound:0,textLayers:[]};if(t.length===0){figma.notify("Please select at least one text layer",{error:!0}),u("LINE_HEIGHT_SCAN_COMPLETE",e);return}function n(o){let c=[];for(let l of o)l.type==="TEXT"?c.push(l):"children"in l&&c.push(...n(l.children));return c}let r=n(t);if(r.length===0){figma.notify("No text layers found in selection",{error:!0}),u("LINE_HEIGHT_SCAN_COMPLETE",e);return}let i=new Set;for(let o of r)o.fontName!==figma.mixed&&i.add(o.fontName.family);let s=[];for(let o of i)E(o)||s.push(o);if(s.length>0){figma.notify(`Fetching metrics for ${s.length} font(s)...`);for(let o of s)await Q(o)}for(let o of r)try{let c=o.fontName;if(c===figma.mixed){console.log(`[LH Scan] Skipping ${o.name}: mixed fonts`);continue}let l=o.fontSize;if(l===figma.mixed){console.log(`[LH Scan] Skipping ${o.name}: mixed font sizes`);continue}let f=E(c.family);if(f||(f=await Q(c.family)),o.lineHeight===figma.mixed){console.log(`[LH Scan] WARNING: ${o.name} has mixed line heights!`);let y=o.characters,v=1.5,A=l*1.5,N=!1,J="OPTIMAL";for(let S=0;S<y.length;S++){let F=o.getRangeLineHeight(S,S+1);if(F!==figma.mixed&&F.unit==="PIXELS"){let w=q(l,F.value,c.family,f);w.hasIssue&&(N||(N=!0,A=F.value,v=w.ratio,J=w.issueType))}}if(N){let S=X(l,c.family,f);e.textLayers.push({nodeId:o.id,nodeName:`${o.name} (mixed)`,fontFamily:c.family,fontStyle:c.style,fontSize:l,lineHeight:A,lineHeightRatio:v,hasIssue:!0,issueType:J,recommendedLineHeight:S,overlapAmount:Math.abs(S-A)}),e.totalScanned++,e.issuesFound++}continue}let m=I(o),d=q(l,m,c.family,f),h=d.recommended,p=ki(l,m,c.family,f);e.textLayers.push({nodeId:o.id,nodeName:o.name,fontFamily:c.family,fontStyle:c.style,fontSize:l,lineHeight:m,lineHeightRatio:d.ratio,hasIssue:d.hasIssue,issueType:d.issueType,recommendedLineHeight:d.hasIssue?h:void 0,overlapAmount:d.hasIssue?p:void 0}),e.totalScanned++,d.hasIssue&&e.issuesFound++}catch(c){console.error(`[LH Scan] Error scanning ${o.name}:`,c)}e.issuesFound>0?figma.notify(`Found ${e.issuesFound} line height issue${e.issuesFound===1?"":"s"}`):figma.notify("All line heights are optimal!"),u("LINE_HEIGHT_SCAN_COMPLETE",e)}});var Vi,qi=a(()=>{"use strict";H();Vi=async function(t){try{let e=figma.getNodeById(t.nodeId);if(!e||e.type!=="TEXT"){figma.notify("Text layer not found",{error:!0});return}let n=e.fontName;if(n===figma.mixed){figma.notify("Cannot fix text with mixed fonts",{error:!0});return}await figma.loadFontAsync({family:n.family,style:n.style}),e.lineHeight={value:t.newLineHeight,unit:"PIXELS"},figma.notify(`\u2713 Updated "${e.name}" line height to ${t.newLineHeight}px`),u("SCAN_LINE_HEIGHTS")}catch(e){figma.notify(`Failed to fix line height: ${e}`,{error:!0})}}});var Ki,Qi=a(()=>{"use strict";H();Ki=async function(t){let e=0,n=[];for(let r of t.fixes)try{let i=figma.getNodeById(r.nodeId);if(!i||i.type!=="TEXT")continue;let s=i.fontName;if(s===figma.mixed){n.push(`Skipped ${i.name}: Mixed fonts`);continue}await figma.loadFontAsync({family:s.family,style:s.style}),i.lineHeight={value:r.newLineHeight,unit:"PIXELS"},e++}catch(i){n.push(`Failed to fix ${r.nodeId}: ${i}`)}e>0?(figma.notify(`Fixed ${e} line height issue${e!==1?"s":""}`),u("SCAN_LINE_HEIGHTS")):n.length>0&&(figma.notify("Failed to fix some issues",{error:!0}),console.error("Fix all errors:",n))}});var Z={};nn(Z,{default:()=>dn});function dn(){x("SCAN_FONTS",me),x("APPLY_REPLACEMENT",ue),x("BULK_UPDATE",he),x("PREVIEW_SELECTION",He),x("REQUEST_AVAILABLE_FONTS",xe),x("TRIM_TEXT",Bi),x("SCAN_LINE_HEIGHTS",ji),x("FIX_LINE_HEIGHT",Vi),x("FIX_ALL_LINE_HEIGHTS",Ki),x("SELECT_NODE",ve),$("close",function(){figma.closePlugin()}),C({width:380,height:480})}var Y=a(()=>{"use strict";H();de();ge();pe();ye();Ae();Se();zi();Xi();qi();Qi()});var un={"src/main.ts--default":(Y(),ne(Z)).default,open:(Y(),ne(Z)).default},gn=typeof figma.command=="undefined"||figma.command===""||figma.command==="generate"?"src/main.ts--default":figma.command;un[gn]();
